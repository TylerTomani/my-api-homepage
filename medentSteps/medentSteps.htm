<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>medentSteps</title>
    <link rel="stylesheet" href="../css/colors.css">
    <link rel="stylesheet" href="../css/copy-code.css">
    <link rel="stylesheet" href="css/medent-header.css"/>
    <link rel="stylesheet" href="css/medent-main.css"/>
    <link rel="stylesheet" href="css/imgVid.css"/>
    <link rel="stylesheet" href="css/chatGpt-questions.css"/>
    <link rel="stylesheet" href="css/medentColors.css"/>
    <script src="js/home-link-focus.js" defer></script>
    <script  src="js/stepPartDropFocus.js" defer></script>
    <script  src="js/addTabIndex.js" defer></script>
    <script module src="js/enlargeImg.js" defer></script>
    <script  src="../js/copy-code.js" defer></script>

    
    <script module src="js/chatGpt-drop-topics.js" defer></script>
</head>
<body>
    <header>
        <div class="fi home-link">
            <a tabindex="1" href="../index.htm">home</a>
        </div>
        <div class="fi tutorial-links ">
            <a tabindex="1" class="chatGpt-link" target="_blank" href="../chatGpt-questions/chatGpt-questions.htm">chatGpt-questions</a>
            <a tabindex="1" class="linkedinLearning" target="_blank" href="../linkedinLearning/index.html">linkedinLearning</a>
            
        </div>
        <div class="fi page-title">
            <h1>medentSteps</h1>
            <div class="page-logo">
                <img src="medent.png" alt="">
                <a tabindex="1" target="_blank" href="https://www.youtube.com/watch?v=cCKPjW5JwKo&list=PL3JVwFmb_BnTamTxXbmlwpspYdpmaHdbz&index=3
                ">tutorial</a>

            </div>

        </div>
    </header>
    <main>   
        <!-- Documentation -->
        <section tabindex="1" id="documentation" class="topic-container "  >
            <header>
                <h2>Documentation</h2>
            </header>
            <div class="topic ">
                <p> These are the 4 documentations I have been working from</p>
                <div class="documentation">
                    <!-- Medent -->
                    <div class="doc">
                        <h3>medent api documentation</h3>
                        <p>
                            He are the two documentation from Medent I am working with
                        </p>
                        <ul>
                            <li> <strong>source 1: </strong><a target="_blank" href="https://www.medent.com/mapi.pdf">https://www.medent.com/mapi.pdf</a></li>
                            <li> <strong>source 2: </strong> <a target="_blank" href="https://datatracker.ietf.org/doc/html/rfc7591#section-3.1">https://datatracker.ietf.org/doc/html/rfc7591#section-3.1</a></li>
                        </ul>
                    </div>
                    <!-- FHIR -->
                    <div class="doc">
                        <h3>hl7 FHIR Documentation </h3>
                        <p>
                        <span class="r">I'm not sure how to register api in FHIR?</span>
                        </p>
                        <ul>
                            <li><a  target="_blank" href="https://www.hl7.org/fhir/documentation.html">https://www.hl7.org/fhir/documentation.html</a></li>
                        </ul>
                        <p>
                            This is the FHIR docmentation I found on cloud.google.com
                        </p>
                        <ul>
                            <li><a target="_blank" href="https://cloud.google.com/healthcare-api/docs/concepts/fhir#:~:text=Fast%20Healthcare%20Interoperability%20Resources%20(FHIR,electronic%20health%20records%20(EHR).">cloud.google.com (FHIR)</a></li>
                        </ul>
    
                    </div>
                </div>
            </div>
        </section>  
        <!-- Part 1 Usage Summary source 1 -->
        <div class="part">
            <a   id="part01" tabindex="1" href="#" class="dropPart"><h2>Part 1 - Usage Summary </h2>
                <strong>source 1: </strong> https://www.medent.com/mapi.pdf</a>
            <div class="steps-container ">
                <div class="step-col">
                    <div  tabindex="1" class="step-txt">
                        <a target="_blank" href="https://www.medent.com/mapi.pdf">https://www.medent.com/mapi.pdf</a>
                        <h3>Usage Summary:</h3>
                        <ul>
                            <li>1. <strong>Dynamic Application Registration:</strong> Obtain a MEDENT API
                                registration ID from: <a target="_blank" href="https://www.medentmobile.com/mapi/register/
                                "> https://medentmobile.com/mapi/register/</a></li>
                            <li>2. <strong>MEDENT Point of Care ID Acquisition:</strong> Use API to obtain list of MEDENT Point of Care (POC) IDs.</li>
                            <li>3. <strong>MEDENT Portal Credential Acquisition:</strong> Obtain MEDENT Portal credentials from Patients per
                                MEDENT POC location.</li>
                            <li>4. <strong>Patient Token Acquisition:</strong> Use API to obtain a patient token for given MEDENT Portal credentials and
                                POC ID</li>
                            <li>5. <strong>Data Queries using Patient Token:</strong> Use patient token to obtain API supported patient data elements</li>
                        </ul>
                    </div>  
                </div>
                <!-- 01 -->
                <div class="step">
                    <div id="step0101" tabindex="1" class="step-txt">
                        <h3>01</h3>
                        <p><a target="_blank" href="https://www.medent.com/mapi.pdf">https://www.medent.com/mapi.pdf</a></p>
                        <pre>
                            _________________________________________________________________________
    1. <strong>Dynamic Application Registration:</strong>
    All entities that wish to use the MEDENT API must first obtain a registration ID. Registration is automated.
    Registration IDs can be used immediately. All MEDENT API POST transactions must contain a valid
    registration ID. Registration is only required once.
    To obtain a registration ID:
    1. Fill out form at: <a href="https://medentmobile.com/mapi/register/">https://medentmobile.com/mapi/register/</a>
    2. Once form is successfully submitted the registration ID will be emailed to the address entered on the
    form
                        </pre>
                    </div>
                    <div class="step-img">
                        <img src="imagesVideos/01-01a.png" >
                    </div>
                </div>
                <!--  I DON'T KNOW WHY focus is not going to id="step0102" -->
                <div class="step">
                    <div tabindex="1" class="step-txt">
                        <p>
                           I did this, received this email with the <code class="m">registration_id</code> and saved info to file in project 
                        </p>
                    </div>
                    <div class="step-img">
                        <img src="imagesVideos/01-01b.png" >
                    </div>
                </div>
            <!-- 02 -->
                <div class="step">
                    <div   id="step0102" tabindex="1" class="step-txt">
                        <h3>02</h3>
                        <pre>
                            _________________________________________________________________________
2. <strong>MEDENT Point of Care ID Acquisition:</strong>
To obtain the Medent affiliated POC locations POST to:
<span class="o">https://www.medentmobile.com/mapi/services/pocquery.php</span>
Form parameters:
registration_id: string (required) - A valid MEDENT API application registration ID (see section above:
Dynamic Application Registration)

                        </pre>
                    </div>
                    <div class="step-img">
                        <img src="imagesVideos/01-02.png" >
                    </div>
                </div>
                <div class="chatgpt-question-container">
                    <div   tabindex="1" class="chatgpt-question">
                        <div class="ts-icon-container">
                            <img class="fi logo" src="imagesVideos/ts-icon.png" alt="">
                        </div>
                        <div class="chatgpt-question-txt">
                            <h5  class="the-chatgpt-question"><strong>question:</strong>
                                How do i post the following using python instead, (the php code from the image above to the right)
                            </h5>
                            <div class="code-container">
                                <pre class="copy-code question-code">
&lt;?xml version="1.0" encoding="utf-8" ?>
# Output is wrapped in a single response. &lt;response>
#see status code responses at the end of this documentation for all possible status codes &lt;status>200&lt;/status>
#If status is 200 (SUCCESS), each POC will have entry containing name/ID as follows. &lt;poc>
&lt;pocname>Example Name 1&lt;/pocname> &lt;pocid>IdExample1&lt;/pocid>
&lt;/poc> &lt;poc>
&lt;pocname>Example Name 2&lt;/pocname>
&lt;pocid>IdExample2&lt;/pocid> &lt;/poc>
... &lt;/response></pre>	
                            </div>
                        </div>
                    </div>
                    <div class="answer">
                        <div class="logo-icon-container">
                            <img class="fi logo" src="imagesVideos/logo-icon.png" alt="">
                        </div>
                        <div class="answer-txt">
                            <p>
To achieve this, you can use the requests library in Python to send a POST request with the required form parameters to the given URL. Here's how you can do it:
                            </p>
                            <p>
                                First, make sure you have the <strong><code><q>requests</q></code></strong> library installed. You can install it using the following command:                            
                            </p>
                            <div class="code-container">
                                <pre tabindex="1" class="copy-code">
pip install requests</pre>	
                            </div>
                            <p>
                                Next, you can use the following code snippet to send a POST request with the specified form parameters to the given URL and receive the XML response:
                            </p>
                            <div class="code-container">
                            <pre tabindex="1" class="copy-code answer-python">
<span class="b">import</span> requests

# URL for the POST request
url = <span class="o">"https://www.medentmobile.com/mapi/services/pocquery.php"</span>

# Form parameters
data = {
    "registration_id": "your_registration_id_here"
}

# Send POST request
response = requests.post(url, data=data)

# Check if the request was successful (status code 200)
if response.status_code == 200:
    # Print the XML response content
    print(response.text)
else:
    print("Request failed with status code:", response.status_code)

                            </pre>	
                            </div>
              
                            <p tabindex="1">
                                Make sure to replace <span class="m">"your_registration_id_here"</span>(look at <a tabindex="1" href="#step0101">step 1</a> ) with your actual MEDENT API application registration ID.                            
                                
                                <br><br>
                                The above code sends a POST request to the specified URL with the form parameters and prints the XML response content. You can then parse the 
                                XML response using libraries like xml.etree.ElementTree to extract the required information from the response XML, such as the names and IDs 
                                of the affiliated POC locations.
                            </p>

                        </div>
                    </div>
                </div>
                <div class="chatgpt-question-container">
                    <div   tabindex="1" class="chatgpt-question">
                        <div class="ts-icon-container">
                            <img class="fi logo" src="imagesVideos/ts-icon.png" alt="">
                        </div>
                        <div class="chatgpt-question-txt">
                            <h5  class="the-chatgpt-question"><strong>question:</strong>
                                How do I convert the response from the above code example from xml to json in python.
                            </h5>
                        </div>
                    </div>
                    <div class="answer">
                        <div class="logo-icon-container">
                            <img class="fi logo" src="imagesVideos/logo-icon.png" alt="">
                        </div>
                        <div class="answer-txt">

                            <div class="code-container">
                                <pre tabindex="1" class="copy-code">
import requests
import xmltodict
import json

# URL for the POST request
url = "https://www.medentmobile.com/mapi/services/pocquery.php"

# Form parameters
data = {
    "registration_id": "<span class="m">xxxxxxxxxxxxxx</span> "
}

# Send POST request
response = requests.post(url, data=data)

# Check if the request was successful (status code 200)
if response.status_code == 200:
    # Parse the XML response to a Python dictionary
    xml_dict = xmltodict.parse(response.text)

    # Convert the Python dictionary to JSON
    json_response = json.dumps(xml_dict, indent=4)

    print(json_response)

    # Save JSON response to a file
    with open('newFile.json', 'w') as f:
        f.write(json_response)
else:
    print("Request failed with status code:", response.status_code)
</pre>	
                            </div>

                        </div>
                    </div>
                </div>
                <div class="step">
                    <div   tabindex="1" class="step-txt">
                        <p>
                           Query the <code class="m">xml_dict</code> before converting it to json 
                           to find our companie's <code class="o">pocid</code> by name, ( this scripts prints and write it to a file) 
                        </p>
                        <div class="code-container">
                            <pre tabindex="1" class="copy-code">
import requests
import xmltodict
import json
# URL for the POST request
url = "https://www.medentmobile.com/mapi/services/pocquery.php"
# Form parameters
data = {
    "registration_id": "(<span class="m">put real registration_id here</span>)"
}
# Send POST request
response = requests.post(url, data=data)

# Check if the request was successful (status code 200)
if response.status_code == 200:
    # Parse the XML response to a Python dictionary
    xml_dict = xmltodict.parse(response.text)
    <span class="l"># query through the python dictionary for our 'pocid</span>
    for item in xml_dict['response']['poc']:
        # print(item['pocname'])
        if item['pocname'] == '<span class="m">XXXXXXXX Real name query here</span>':
            print(item['pocname'])
            print(item['pocid'])
            # Save JSON response to a file
            with open('newFile.json', 'w') as f:
                f.write(item['pocname'])
                f.write('\n')
                f.write(item['pocid'])
    # Convert the Python dictionary to JSON
    json_response = json.dumps(xml_dict, indent=4) 
else:
    print("Request failed with status code:", response.status_code)

</pre>	
                        </div>
                    </div>
                    <div class="step-img">
                        <img src="imagesVideos/01-02b.png" >
                    </div>
                </div>
                <!-- 03 -->
                <div class="step">
                    <div id="step0103" tabindex="1" class="step-txt">
                        <h3>03</h3>
                        <pre>
                            _________________________________________________________________________
3. <strong>MEDENT Portal Credential Acquisition:</strong>
                             
Third party apps must present a list of MEDENT affiliated POC location names, obtained above, to patients
when registering to use their app. Patients will choose their POC location from this list and provide the
MEDENT Portal credentials for this MEDENT POC.
The method of Acquisition is left up to the third party
                        </pre>
                    </div>
                    <div class="step-img">
                        <img src="imagesVideos/01-03.png" >
                    </div>
                </div>
                <div class="chatgpt-question-container">
                    <div   tabindex="1" class="chatgpt-question">
                        <div class="ts-icon-container">
                            <img class="fi logo" src="imagesVideos/ts-icon.png" alt="">
                        </div>
                        <div class="chatgpt-question-txt">
                            <h5  class="the-chatgpt-question"><strong>question:</strong>
                                what does the following mean in regard to using an api "
3. MEDENT Portal Credential Acquisition: Third party apps must present a list of MEDENT affiliated POC location names, obtained above, to patients when registering to use their app. Patients will choose their POC location from this list and provide the MEDENT Portal credentials for this MEDENT POC. The method of Acquisition is left up to the third party
                            </h5>
         
                        </div>
                    </div>
                    <div  class="answer">
                        <div class="logo-icon-container">
                            <img class="fi logo" src="imagesVideos/logo-icon.png" alt="">
                        </div>
                        <div tabindex="1" class="answer-txt">
                            <p>
                                The statement you provided appears to be outlining a requirement or guideline for
                                third-party applications (apps) that want to integrate with the MEDENT system through
                                an API (Application Programming Interface). Let's break down the key points:
                            </p>
                            <p>
                                1. <strong>MEDENT Portal Credential Acquisition:</strong>
                                This refers to the process by which third-party apps obtain the necessary credentials 
                                or access rights to interact with MEDENT's portal or system. MEDENT likely has certain
                                security measures in place to ensure that only authorized apps can access their system, 
                                and this requirement specifies how third-party apps should obtain the necessary credentials.
                            </p>
                            <p>
                                2. <strong>Third-party apps must present a list of MEDENT affiliated POC location names:</strong>
                                POC stands for "Point of Care." It appears that MEDENT has multiple locations where healthcare 
                                services are provided, and these locations are affiliated with MEDENT. Third-party apps are required 
                                to provide a list of these affiliated POC locations to their users, likely during the registration 
                                process.
                            </p>
                            <p tabindex="1">
                                3. <strong>Patients will choose their POC location from this list:</strong>
                                <span class="hlight">Patients using the third-party app will be given the option to select the specific MEDENT-affiliated 
                                POC location that they are associated with or wish to interact with.</span> This choice is important because 
                                it may determine the specific medical records and services available to the patient within the app.
                            </p>
                            <p>
                                4. <strong>Provide the MEDENT Portal credentials for this MEDENT POC:</strong>
                                Once the patient selects their affiliated POC location, they are required to provide the necessary 
                                MEDENT Portal credentials for that specific location.
                                <span class="runder1">This step ensures that the app can securely access 
                                and retrieve the patient's medical information or interact with MEDENT's services on their behalf.</span>
                            </p>
                            <p>
                                5. <strong>The method of Acquisition is left up to the third party:</strong>
                                This part of the statement indicates that MEDENT does not specify the exact process by which third-party 
                                apps should acquire the MEDENT Portal credentials. Instead, they leave it up to the third-party app developers 
                                to determine how they will implement this credential acquisition process. This allows flexibility for different 
                                apps to integrate with MEDENT's system in a way that works best for their user experience and security measures.
                            </p>
                            <p tabindex="1">
                                In summary, this statement outlines the requirements for third-party apps to integrate with 
                                MEDENT's system through an API. It ensures that patients using these apps can select their 
                                affiliated healthcare location, provide the necessary credentials, and access their medical 
                                information securely. The specific implementation details for credential acquisition are 
                                left to the discretion of the third-party app developers.
                            </p>
                        </div>
                    </div>
                </div>
                <!-- 04 -->
                <div class="step">
                    <div   id="step0104" tabindex="1" class="step-txt">
                        <h3>04</h3>
                        <p>
                            _________________________________________________________________________

4. <strong>Patient Token Acquisition:</strong>
A patient token must be obtained prior to requesting patient data. To obtain patient tokens POST to:
https://www.medentmobile.com/mapi/services/index.php
                        </p>
                    </div>
                    <div class="step-img">
                        <img src="imagesVideos/01-04.png" >
                    </div>
                </div>
                <div class="chatgpt-question-container">
                    <div     tabindex="1" class="chatgpt-question">
                        <div class="ts-icon-container">
                            <img class="fi logo" src="imagesVideos/ts-icon.png" alt="">
                        </div>
                        <div class="chatgpt-question-txt">
                            <h5  class="the-chatgpt-question"><strong>question:</strong>
                                how would i do the following using python"
                            </h5>
                            <div class="code-container ">
                                <pre class="copy-code question-code">
User
how would i do the following using python "
4. Patient Token Acquisition:
A patient token must be obtained prior to requesting patient data. To obtain patient tokens POST to:
https://www.medentmobile.com/mapi/services/index.php
Form parameters:
registration_id: string (required) - A valid MEDENT API application registration ID (see section above:
Dynamic Application Registration)
poc_id: string (required) - A valid MEDENT affiliated POC ID (see section above: MEDENT Point Of
Care (POC) ID:)
user_name: string (required) - A valid MEDENT Portal user name for the POC specified by poc_id
password: string (required) - A valid MEDENT Portal password for the POC specified by poc_id
Returns: A patient token that can be used for retrieving patient data or an error code. The patient token's
lifetime is determined by the POC office of the patient. It will return a status code of EXPIRED when this
lifetime has been met and a new one will be need to be acquiried.
Below is an explanation of the format and tags contained in MEDENT API Patient Token XML response.
                            </pre>	
                            </div>
                        </div>
                    </div>
                    <div  class="answer">
                        <div class="logo-icon-container">
                            <img class="fi logo" src="imagesVideos/logo-icon.png" alt="">
                        </div>
                        <div tabindex="1" class="answer-txt ">
                            <p>
                                To obtain a patient token in Python, you can use the <strong><code><q>requests</q></code></strong> library to make a POST request to the specified 
                                URL with the required form parameters. Here's a step-by-step guide on how to do it:
                            </p>
                            <p>
                                First, you'll need to install the requests library if you haven't already. You can do this using pip:
                            </p>
                            <div class="code-container">
                                <pre class="copy-code">
pip install requests</pre>	
                            </div>
                            <p tabindex="1">
                                Now, you can create a Python script to obtain the patient token:
                            </p>
                            <div class="code-container">
                                <pre class="copy-code">
import requests

# Define the URL for patient token acquisition
url = "https://www.medentmobile.com/mapi/services/index.php"

# Define the form parameters
data = {
    "registration_id": "your_registration_id",
    "poc_id": "your_poc_id",
    "user_name": "your_username",
    "password": "your_password"
}

# Make a POST request to obtain the patient token
response = requests.post(url, data=data)

# Check the response status code
if response.status_code == 200:
    # Parse the XML response to extract the patient token
    import xml.etree.ElementTree as ET
    root = ET.fromstring(response.text)
    patient_token = root.find("patient_token").text
    print(f"Patient Token: {patient_token}")
else:
    print(f"Error: Status Code {response.status_code}")
</pre>	
                            </div>
                            <p tabindex="1">
                                Replace <strong><code><q>your_registration_id</q></code></strong>, <strong><code><q>your_poc_id</q></code></strong>, 
                                <strong><code><q>your_username</q></code></strong> , and <strong><code><q>your_password</q></code></strong> with your actual credentials.
                                <br>
                                This script sends a POST request to the specified URL with the form parameters and then parses the XML response to extract the patient token if the status code is 200 (SUCCESS). Be sure to handle errors and exceptions according to your specific needs and requirements.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    

        <!-- Step 2 - put files into "Random Files" Folder on drive -->
        <div class="part">
            <a id="02" tabindex="1" href="#" class="dropPart"><h2>Part 2 - TBD</h2></a>
            <div class="steps-container">
                <div class="step">
                    <div id="step0201" tabindex="1" class="step-txt">
                        <h3>01</h3>
                        <p>
                            
                        </p>
                    </div>
                    <div class="step-img">
                        <!-- <img src="imagesVideos" > -->
                    </div>
                </div>
                <div class="step-col">
                    <div id="step0202" tabindex="1" class="step-txt">
                        <h3>02</h3>
                        <p>
                            
                        </p>
                    </div>
                    <div class="step-img">
                        <!-- <img src="imagesVideos" > -->
                    </div>
                </div>
            </div>
        </div>

 
    </main>
    
</body>
</html>